(()=>{let t=[];class e{constructor(t,e,n,o){this.title=t,this.author=e,this.pages=n,this.status=o}getInfo(){return`${this.title} by ${this.author}, ${this.pages} pages, ${this.read}`}}function n(){document.querySelectorAll(".books-container").forEach(((t,e)=>{t.dataset.bookIndex=e}))}function o(){const t=document.querySelectorAll(".delete-button");t.forEach((t=>{t.removeEventListener("click",s)})),t.forEach((t=>{t.addEventListener("click",s)}))}function s(e){const s=e.target.parentElement,a=s.dataset.bookIndex;void 0!==a&&t[a]&&(s.remove(),function(e){t.splice(e,1),n(),o()}(a))}function a(){const t=document.querySelectorAll(".status-btn");t.forEach((t=>{t.removeEventListener("click",c)})),t.forEach((t=>{t.addEventListener("click",c)}))}function c(e){const n=e.target,o=n.parentElement.dataset.bookIndex;if(void 0!==o&&t[o]){const e=t[o];"Read"===e.status?e.status="Unread":e.status="Read",n.textContent=e.status,n.dataset.status=e.status}}o(),a();const d=document.querySelector(".books-body"),u=document.querySelector("dialog"),l=document.querySelector("dialog + button"),i=document.querySelector("dialog button"),r=document.getElementById("book-form"),m=document.getElementById("book-name"),E=document.getElementById("author"),h=document.getElementById("pages"),b=document.getElementById("status");l.addEventListener("click",(()=>{u.showModal()})),i.addEventListener("click",(()=>{u.close()})),r.addEventListener("submit",(s=>{s.preventDefault();const c=m.value,l=E.value,i=h.value,r=b.value,p=new e(c,l,i,r);!function(e){t.push(e)}(p),function(e){const n=document.createElement("div");n.classList.add("books-container"),n.dataset.bookIndex=t.indexOf(e);const o=document.createElement("p"),s=document.createElement("span");o.textContent=e.title,o.appendChild(s),o.classList.add("tooltip"),o.dataset.fulltext=e.title;const a=document.createElement("button");a.textContent="Delete",a.classList.add("delete-button"),n.appendChild(o),n.appendChild(a),d.appendChild(n)}(p);const f=document.querySelector(`.books-container[data-book-index="${t.indexOf(p)}"]`),v=document.createElement("button");v.textContent=p.status,v.classList.add("status-btn"),v.dataset.status=p.status,f.appendChild(v),u.close(),o(),n(),a()}))})();